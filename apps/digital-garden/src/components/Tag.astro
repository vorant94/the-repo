---
import { getRelativeLocaleUrl } from "astro:i18n";
import type { TagModel } from "../lib/content";
import { type TailwindColor, tailwindColors } from "../lib/tailwind";
import { Badge } from "./ui/badge.tsx";
import { Link } from "./ui/link";

export interface Props {
  tag: TagModel;
}

const { tag } = Astro.props;

const tagHash = tag.data.id
  .split("")
  .map((char) => char.charCodeAt(0))
  .reduce((prev, curr) => prev + curr, 0);

const color = tailwindColors[tagHash % tailwindColors.length] as TailwindColor;
---

<Link
	transition:name={`tag.${tag.data.id}`}
	href={getRelativeLocaleUrl(Astro.currentLocale!, `/${tag.collection}/${tag.data.id}`)}
>
	<Badge
		className="inline-block! max-w-24 truncate sm:max-w-none lg:max-w-24 xl:max-w-none"
		color={color}
	>
		#{tag.data.id}
	</Badge>
</Link>
